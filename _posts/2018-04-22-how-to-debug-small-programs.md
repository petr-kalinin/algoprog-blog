---
layout: post
title: Как отлаживать маленькие программы
---

Пусть у вас есть небольшая программа, которая... не работает. Причем не просто как-то не работает, а у вас есть конкретный тест, 
конкретный пример, на котором она не работает. (Если у вас такого примера нет, то у меня есть 
[отдельный текст](https://github.com/petr-kalinin/progtexts/releases/download/v2014.11.01/06_testing.pdf) 
про то, что делать в таком случае.) Как понять, что в программе не так, и как это исправить?

> На самом деле, на эту тему есть знаменитый текст 
> "[How to debug small programs](https://ericlippert.com/2014/03/05/how-to-debug-small-programs/)"
> и его [русский перевод](https://habrahabr.ru/post/339038/), но на мой взгяд
> рекомендации, приведенные там, — это излишнее усложнение, не нужное на самом деле в 90% действительно простых программ.

Итак, у вас есть тест, но вы не понимаете, почему программа на нем выдает не тот результат,
который нужен. Ну, во-первых, по возможности уменьшите тест. Если в вашей задаче вводится какой-то массив или т.п., 
то не надо разбираться с программой на массиве длины 10. Попробуйте найти тест длины 3-4, на котором программа тоже не будет работать.

Тут на самом деле есть три основных подхода.

Если у вас программа действительно небольшая, строк 10-20 максимум, то вы можете представить себя на месте компьютера 
и в уме выполнить программу. Возьмите листочек бумажки (или откройте "Блокнот"), выпишите на нем список переменных, 
которые есть в вашей программе, оставив у каждой переменной место, куда вы будете записывать их значения. 
Это будет оперативная память вашего компьютера. (В дальнейшем, когда вы освоитесь, бумажка вам не будет нужна,
вы будете держать все нужные значения в уме.)

Далее выполняйте программу пошагово, с самого начала (ну можете пропустить ввод данных, если вы в нем на 200% уверены). 
При каждом изменении значения каждой переменной выписывая измененное значение на бумажке.
Самое важное тут — это подробно и тщательно делать именно то, что написано в программе. Забудьте (точнее лучше задвиньте на задний план)
вашу задачу, забудьте, зачем вы писали этот код. Вы работаете за компьютер, компьютер ничего не знает про то,
какая у вас задача, он просто тупо выполняет написанный код. Полезно тщательно проговаривать каждую выполняемую операцию. 
Не забывайте, что операции — это не только присваивания, это еще и все управляющие конструкции (if'ы, циклы и т.д.); 
не забывайте, что в циклах на каждой итерации выполняются действия, относящиеся собственно к циклу
(проверка условия в while, увеличение индекса цикла в for). Все изменения переменных отражайте на бумажке,
каждый раз, когда вам нужно значение какой-то переменной, сверяйтесь с бумажкой.

Пример. Задача "[переставить элементы в обратном порядке](https://algoprog.ru/material/p69)". 
Типичный код, который тут многие пишут, примерно такой:

    # a - массив, который вы считали
    for i in range(len(a)):
        t = a[i]
        a[i] = a[len(a)-i]
        a[len(a)-i] = t
        
Вы запускаете программу на тесте "1 2 3", и она падает. Хорошо, давайте представим, что мы выполняем эту программу за компьютер.

